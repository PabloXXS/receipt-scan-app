# Ticket App ‚Äî –∞–Ω–∞–ª–∏–∑ —á–µ–∫–æ–≤

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ–∫–æ–≤: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ (–∫–∞–º–µ—Ä–∞/–≥–∞–ª–µ—Ä–µ—è), —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ò–ò-–∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π.

> üÜì **–ù–æ–≤–æ–µ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ** —Å Tesseract OCR!  
> –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞: `./setup-free-mode.sh` –∏–ª–∏ —Å–º. [FREE_MODE_SETUP.md](FREE_MODE_SETUP.md)

## –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã

- iOS, Android (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –û–°)
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å —Å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π (gen-l10n)

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —á–µ–∫–æ–≤ –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º** ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–≥–∞–∑–∏–Ω—ã —Å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ–∫–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞** ‚Äî –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –º–∞–≥–∞–∑–∏–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–µ–∫–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ–∫–æ–≤: –∫–∞–º–µ—Ä–∞ –∏ –≥–∞–ª–µ—Ä–µ—è (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)
- –°–µ—Ä–≤–µ—Ä–Ω—ã–π OCR/LLM-–∞–Ω–∞–ª–∏–∑ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã TBD)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π —á–µ–∫–∞ –∏ –ø–æ–∑–∏—Ü–∏–π
- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –º–∞–≥–∞–∑–∏–Ω–∞–º
- –≠–∫—Å–ø–æ—Ä—Ç (CSV/JSON)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: email magic link, Google, Apple
- –ü–æ–¥–ø–∏—Å–∫–∞ (–ø—Ä–µ–º–∏—É–º: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∞–Ω–∞–ª–∏–∑ —Ü–µ–Ω, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- Sentry –¥–ª—è –æ—à–∏–±–æ–∫

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)

- Flutter + Riverpod + Freezed + GoRouter
- –ë—ç–∫–µ–Ω–¥: Supabase (Auth, Postgres, Storage, Edge Functions)
- AI-–ø–∞–π–ø–ª–∞–π–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ; –º–æ–±–∏–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞, —Å—Ç–∞—Ç—É—Å, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: —Å–º. `docs/architecture.md`, `docs/ai_pipeline.md`, `docs/data_model.md`, `docs/security.md`, `docs/api.md`.

## –†–µ–∂–∏–º—ã OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

### üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º (Tesseract)

```bash
./setup-free-mode.sh
```

- **Tesseract OCR** (open-source) –Ω–∞ Fly.io Free Tier
- **OCR.space** –∫–∞–∫ fallback (25k –±–µ—Å–ø–ª–∞—Ç–Ω–æ/–º–µ—Å)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0/–º–µ—Å—è—Ü –¥–ª—è ~15,000 —á–µ–∫–æ–≤
- **–¢–æ—á–Ω–æ—Å—Ç—å:** 85-95% –Ω–∞ —Ö–æ—Ä–æ—à–∏—Ö —Ñ–æ—Ç–æ

–°–º. [FREE_MODE_SETUP.md](FREE_MODE_SETUP.md)

### üíé –ü—Ä–µ–º–∏—É–º —Ä–µ–∂–∏–º (OpenAI Vision)

```bash
supabase secrets set AI_PROVIDER=openai
supabase secrets set OPENAI_API_KEY=sk-xxx
```

- **OpenAI GPT-4o-mini Vision** (–º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∞—è LLM)
- **Tesseract + OCR.space** –∫–∞–∫ fallback
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$0.01-0.02 –∑–∞ —á–µ–∫
- **–¢–æ—á–Ω–æ—Å—Ç—å:** 95-99% –Ω–∞ –ª—é–±—ã—Ö —Ñ–æ—Ç–æ

–°–º. [TESSERACT_QUICKSTART.md](TESSERACT_QUICKSTART.md)

## –ó–∞–ø—É—Å–∫

1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Flutter >= 3.22, Dart >= 3.4
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `SUPABASE_URL`, `SUPABASE_ANON_KEY`
   - `SENTRY_DSN` (–æ–ø—Ü.)
   - `DEFAULT_CURRENCY` (–Ω–∞–ø—Ä–∏–º–µ—Ä, RUB)
3. –ö–æ–º–∞–Ω–¥—ã:

```bash
flutter pub get
flutter run
```

–¢–µ—Å—Ç—ã:

```bash
flutter test
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `lib/` ‚Äî –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–∏–¥–∂–µ—Ç—ã, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)
- `docs/` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö, API, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –≤–∫–ª–∞–¥)
- `ios/`, `android/` ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å
- `test/` ‚Äî —Ç–µ—Å—Ç—ã
- `supabase/` ‚Äî –º–æ–Ω–æ—Ä–µ–ø–æ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞ (CLI, —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–≥—Ä–∞—Ü–∏–∏)

### Monorepo: –º–æ–±–∏–ª—å–Ω—ã–π + Supabase

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI

```bash
brew install supabase/tap/supabase # macOS
```

2. –ö–æ–Ω—Ñ–∏–≥

- `supabase/config.toml` ‚Äî –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `project_id` (ref –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ Dashboard)

3. –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
supabase db reset --use-migra
```

4. –°–µ–∫—Ä–µ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π

```bash
supabase secrets set \
  SUPABASE_URL='https://<ref>.supabase.co' \
  SUPABASE_SERVICE_ROLE_KEY='<service_role>' \
  SUPABASE_ANON_KEY='<anon>' \
  OPENAI_API_KEY='<openai>'
```

5. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫/–¥–µ–ø–ª–æ–π Edge Functions

```bash
supabase functions serve analyze
supabase functions deploy analyze
supabase functions deploy status
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `docs/architecture.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- `docs/data_model.md` ‚Äî —Ç–∞–±–ª–∏—Ü—ã –∏ —Å—Ö–µ–º—ã
- `docs/ai_pipeline.md` ‚Äî –ø–∞–π–ø–ª–∞–π–Ω OCR/LLM
- `docs/api.md` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã/—Ñ—É–Ω–∫—Ü–∏–∏
- `docs/security.md` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- `docs/contributing.md` ‚Äî –≤–∫–ª–∞–¥ –∏ —Å—Ç–∏–ª—å

## –õ–∏—Ü–µ–Ω–∑–∏—è

TBD
